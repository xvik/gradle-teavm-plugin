plugins {
    id 'org.jetbrains.kotlin.jvm' version '1.9.23'
    id 'java-library'
    id 'ru.vyarus.teavm' // version '1.1.0'
}

kotlin {
    jvmToolchain(11)
}

ext {
    teavm = '0.9.0'
}

repositories {
    mavenCentral()
}

dependencies {
    implementation platform('org.jetbrains.kotlin:kotlin-bom')
    implementation 'org.jetbrains.kotlin:kotlin-stdlib-jdk8'

    implementation "org.teavm:teavm-classlib:$teavm"
    implementation "org.teavm:teavm-jso-apis:$teavm"
}

teavm {
    version = getProperty('teavm')
    dev = false
    debug = false
    mainClass = 'example.ClientKt'
}

tasks.register('buildWebapp', Copy) {
    from('src/main/webapp')
    from(compileTeavm) {
        into 'js'
    }
    into 'build/webapp'
}
