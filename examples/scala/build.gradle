plugins {
    id 'scala'
    id 'java-library'
    id 'ru.vyarus.teavm' // version '1.1.0'
}

ext {
    teavm = '0.9.0'
}

repositories {
    mavenCentral()
}

dependencies {
    implementation 'org.scala-lang:scala-library:2.13.13'

    implementation "org.teavm:teavm-classlib:$teavm"
    implementation "org.teavm:teavm-jso-apis:$teavm"
}

teavm {
    version = getProperty('teavm')
    dev = false
    debug = false
    mainClass = 'example.Client'
}

tasks.register('buildWebapp', Copy) {
    from('src/main/webapp')
    from(compileTeavm) {
        into 'js'
    }
    into 'build/webapp'
}
